<html>
<header>
    <style>
        html,body {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            font-size: 16px;
        }

        body{
            margin: 2em;
        }

        *,
        *:before,
        *:after {
            box-sizing: inherit;
        }
    </style>
</header>

<body>
    <div style="padding-bottom: 1em; margin-bottom: 1em; border-bottom: 1px solid;">
        <input id="auto_refresh" type="checkbox" onclick="handleOnAutoRefreshClick();" />
        <label for="auto_refresh">Auto Refresh</label>
    </div>
    {{table}}
    <script>
        window.addEventListener('load', () => {
            const url = new URL(window.location);
            if (url.searchParams.get('auto_refresh')) {
                document.getElementById('auto_refresh').checked = true;
            }
        })

        handleOnAutoRefreshClick = (ev) => {
            const url = new URL(window.location);
            url.searchParams.set('auto_refresh', document.getElementById('auto_refresh').checked);
            window.history.replaceState({}, '', url);
        }
        setInterval(() => {
            if (document.getElementById('auto_refresh').checked) {
                window.location.reload()
            }
        }, 1000)
    </script>
</body>

</html>